"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
const compiler_1 = require("./compiler");
const run = async () => {
    const { isReady, watcher } = (0, compiler_1.watchForMiddlewareChanges)((0, path_1.resolve)(process.argv[2]));
    await isReady;
    if (process.argv[3] === '--once') {
        watcher.close();
    }
};
run();
